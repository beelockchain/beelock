{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/sansanjay/Downloads/kalees/app/api/blueprint/route.ts"],"sourcesContent":["export const runtime=\"nodejs\";\r\nimport { NextResponse } from \"next/server\";\r\nimport OpenAI from \"openai\";\r\n\r\nconst client = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const { service, answers } = body;\r\n\r\n    const prompt = `You are a senior blockchain solution architect.\r\n\r\nCRITICAL OUTPUT RULES:\r\n- Return ONLY valid JSON\r\n- No markdown\r\n- No explanations\r\n- No extra keys\r\n- No trailing text\r\n\r\nJSON schema (must match exactly):\r\n{\r\n  \"title\": \"Blueprint\",\r\n  \"service\": \"<string>\",\r\n  \"summary\": \"<string>\",\r\n  \"inputs\": [\r\n    { \"id\": \"<quiz_id>\", \"value\": \"<string>\" }\r\n  ],\r\n  \"phases\": [\r\n    { \"title\": \"<string>\", \"steps\": [\"<string>\"] }\r\n  ]\r\n}\r\n\r\nRules:\r\n- inputs[].id MUST be one of:\r\n  - blockchain_type\r\n  - use_case\r\n  - network\r\n  - features\r\n  - Ai\r\n  - timeline\r\n- inputs[].value must be readable string (arrays joined by commas)\r\n- phases must be ordered logically:\r\n  Discovery → Architecture → Development → Testing → Launch → Scaling\r\n- Create 4 to 6 phases\r\n- Each phase must have 3 to 6 steps\r\n- Steps must be short, actionable, implementation-focused\r\n- Include AI steps ONLY if Ai is not \"No AI required\"\r\n- If any value is \"Not sure\", include a recommendation/decision step\r\n- Do NOT mention the quiz/options/user\r\n\r\nService: ${service}\r\nAnswers(JSON): ${JSON.stringify(answers)}`;\r\n\r\n    const response = await client.chat.completions.create({\r\n      model: \"gpt-4.1-mini\",\r\n      messages: [{ role: \"user\", content: prompt }],\r\n      response_format: { type: \"json_object\" },\r\n      temperature: 0.4,\r\n    });\r\n\r\n    const json = JSON.parse(response.choices[0].message.content!);\r\n    return NextResponse.json(json);\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to generate blueprint\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AACA;AACA;AAAA;AAFO,MAAM,UAAQ;;;AAIrB,MAAM,SAAS,IAAI,mLAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;QAE7B,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAwCX,EAAE,QAAQ;eACJ,EAAE,KAAK,SAAS,CAAC,UAAU;QAEtC,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBAAC;oBAAE,MAAM;oBAAQ,SAAS;gBAAO;aAAE;YAC7C,iBAAiB;gBAAE,MAAM;YAAc;YACvC,aAAa;QACf;QAEA,MAAM,OAAO,KAAK,KAAK,CAAC,SAAS,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO;QAC3D,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}